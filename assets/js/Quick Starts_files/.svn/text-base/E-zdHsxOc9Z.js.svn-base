/*!CK:203491064!*//*1420430594,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["6v+2\/"]); }

__d("ComposerXEmptyAttachment",["ComposerXAttachment"],function(a,b,c,d,e,f,g){for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(k,l){"use strict";g.call(this);this._root=k;if(l)this.attachmentClassName=l;}j.prototype.getRoot=function(){"use strict";return this._root;};e.exports=j;},null);
__d("TimelineStickyHeaderComposerX",["Arbiter","Bootloader","ComposerXController","CSS","DOMQuery","Event","Parent","Run","TimelineComposerUtilities","TimelineContentLoader","TimelineStickyHeader","Vector","csx","cx","getElementText"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){function v(x){return x&&x.getContext&&m.byClass(x.getContext(),"_2wp");}function w(x){"use strict";this._composerRoot=x;this._tokens=[o.listenToSetEstimatedDate(this._composerRoot,p.capsuleForCurrentSection),o.listenToPublish(this._composerRoot,this._close.bind(this)),g.subscribe('PhotoSnowlift.OPEN',this._close.bind(this)),g.subscribe('TimelineMLE/mleFlyoutShown',function(y,z){if(v(z)===this._composerRoot)i.reset(this._composerRoot);}.bind(this)),g.subscribe('composer/initializedAttachment',function(y,z){if(z.composerRoot===this._composerRoot){this._registerClickToDismiss();if(!z.isInitial)this._closeMLE();}else this._close();}.bind(this)),g.subscribe(q.ADJUST_WIDTH,this._toggleNarrowMode.bind(this))];this._clickCancelToken=o.listenToCancel(this._composerRoot,this._close.bind(this));n.onLeave(function(){while(this._tokens.length)this._tokens.pop().unsubscribe();this._clearClickDismissToken();if(this._clickCancelToken){this._clickCancelToken.remove();this._clickCancelToken=null;}}.bind(this));}w.prototype._toggleNarrowMode=function(event,x){"use strict";h.loadModules(["Tooltip"],function(y){var z=r.getElementDimensions(x).x>400,aa=k.scry(this._composerRoot,"._9lb");j.conditionClass(this._composerRoot,"_2wq",z);for(var ba=0;ba<aa.length;ba++){var ca=aa[ba],da=u(ca);if(z){y.set(ca,da);}else y.remove(ca);}}.bind(this));return false;};w.prototype._registerClickToDismiss=function(){"use strict";var x=j.hasClass(k.find(this._composerRoot,"._yq"),"_519b");if(!x){this._clearClickDismissToken();return;}this._clickDismissToken=l.listen(document.body,'click',function(y){var z=m.byClass(y.getTarget(),"_2wp");if(!z){this._close();this._clearClickDismissToken();}}.bind(this));};w.prototype._clearClickDismissToken=function(){"use strict";if(this._clickDismissToken){this._clickDismissToken.remove();this._clickDismissToken=null;}};w.prototype._close=function(){"use strict";this._clearClickDismissToken();this._closeMLE();i.reset(this._composerRoot);};w.prototype._closeMLE=function(){"use strict";h.loadModules(["TimelineMLE"],function(x){var y=x.getFlyout();if(v(y)===this._composerRoot)x.hideFlyout();}.bind(this));};e.exports=w;},null);
__d("InfoReviewInstanceManager",["DOM","Event","React","csx"],function(a,b,c,d,e,f,g,h,i,j){var k="._5sf3",l=[],m=[],n={addInstanceRoot:function(o,p){m.push(h.listen(p,'click',function(q){var r=g.scry(p,k)[0];r&&g.remove(r);}));l.push(o);},cleanupInstances:function(){var o=[];while(l.length){var p=l.pop();document.contains(p)?o.push(p):i.unmountComponentAtNode(p);}while(m.length)m.pop().remove();l=o;}};e.exports=n;},null);
__d("InfoReviewCloseButton",["DOM","Event","InfoReviewInstanceManager","Parent","$","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m='fbTimelineUnit';function n(o,p){"use strict";this.$InfoReviewCloseButton0=o;this.$InfoReviewCloseButton1=p;this.$InfoReviewCloseButton2=h.listen(this.$InfoReviewCloseButton0,'click',this.$InfoReviewCloseButton3.bind(this));l(this.$InfoReviewCloseButton2);}n.prototype.$InfoReviewCloseButton3=function(){"use strict";var o=k(this.$InfoReviewCloseButton1);if(o.parentElement.children.length===1)o=j.byClass(o,m);g.remove(o)&&this.$InfoReviewCloseButton4();i.cleanupInstances();};n.prototype.$InfoReviewCloseButton4=function(){"use strict";this.$InfoReviewCloseButton0=null;this.$InfoReviewCloseButton1=null;this.$InfoReviewCloseButton2&&this.$InfoReviewCloseButton2.remove();this.$InfoReviewCloseButton2=null;};e.exports=n;},null);
__d("ContextualLayerAsyncRelative",["Event","Parent","copyProperties"],function(a,b,c,d,e,f,g,h,i){function j(k){"use strict";this._layer=k;}j.prototype.enable=function(){"use strict";this._layerSubscription=this._layer.subscribe('show',this._attachListener.bind(this));if(this._layer.isShown())this._attachListener();};j.prototype.disable=function(){"use strict";this._layerSubscription.unsubscribe();this._layerSubscription=null;if(this._listener){this._listener.remove();this._listener=null;}};j.prototype._attachListener=function(){"use strict";this._listener=g.listen(this._layer.getRoot(),'click',this._onclick.bind(this));};j.prototype._onclick=function(k){"use strict";var l=h.byTag(k.getTarget(),'A');if(!l)return;var m=l.getAttribute('ajaxify'),n=l.href,o=m||n;if(l.rel==='async'||l.rel==='async-post'){d(['AsyncRequest'],function(p){p.bootstrap(o,this._layer.getContext(),l.rel==='async-post');}.bind(this));return false;}};i(j.prototype,{_layerSubscription:null,_listener:null});e.exports=j;},null);